const path = require("path"); 
const Module = require("module").Module;
/** @type {Array} */
const nodeModulePath = Module._nodeModulePaths(".");
const to_posix = require("./to_posix");

/**
 * @returns {Array}
 */
 function node_modules(){
    return Array.prototype.flat.call([
        Array.prototype.flat.call(nodeModulePath.map(node_path => [
            to_posix(path.join(node_path, arguments[0])),
            to_posix(path.join(node_path, arguments[0])) + ".js",
            to_posix(path.join(node_path, arguments[0])) + ".json",
            to_posix(path.join(node_path, arguments[0])) + ".node",
        ])),
        [
            to_posix(path.join(process.cwd(),"node_modules", arguments[0])),
            to_posix(path.join(process.cwd(),"node_modules", arguments[0])) + ".js",
            to_posix(path.join(process.cwd(),"node_modules", arguments[0])) + ".json",
            to_posix(path.join(process.cwd(),"node_modules", arguments[0])) + ".node",
        ]
    ]);
}

module.exports = node_modules;